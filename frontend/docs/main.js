(()=>{"use strict";const e=function(e,t,n="GET",i=null){let o={method:n};"PUT"!=n&&"POST"!=n&&null==i||(o.body=JSON.stringify(i),o.headers={"Content-Type":"application/json"}),fetch(e,o).then((e=>e.json())).then((e=>{t(e)})).catch((e=>console.error(e)))};async function t(e,t="GET",n=null){let i={method:t};"PUT"!=t&&"POST"!=t&&null==n||(i.body=JSON.stringify(n),i.headers={"Content-Type":"application/json"});try{let t=await fetch(e,i);return await t.json()}catch(e){throw console.error(e),e}}const n="https://localhost:44376/api/owner/",i=function(e){return!e||0===e.length},o=function(e){return e.charAt(0).toUpperCase()+e.substr(1).toLowerCase()},l=function(e,t,n){t.forEach((t=>{let i=document.createElement("option");e.appendChild(i);for(let[e,o]of Object.entries(n.attributes))i.setAttribute(e,t[o]);for(let[e,o]of Object.entries(n.properties))i[e]=t[o]}))},d=function(){document.getElementById(c),c.innerHTML='\n        <div id="container" style="min-height:100vh; display:flex">\n            <google-map id="map"></google-map>\n            <div id="sidebar" style="flex-basis: 15rem;flex-grow: 1;padding: 1rem;max-width: 30rem;height: 100%;box-sizing: border-box;overflow: auto;flex-direction: column;">\n                <select id="vehicle-select">\n                    <option selected disabled>---SELECT VEHICLE---</option>\n                </select>\n                <label for="origin">Origin:</label><input id="origin" />\n                <label for="destination">Destination:</label><input id="destination" />\n                <select id="unit-system">\n                    <option selected disabled>---SELECT UNIT SYSTEM---</option>\n                    <option value="0">Metric</option>\n                    <option value="1">Imperial</option>\n                </select>\n                <label for="avoid-highways">Avoid Highways</label><input id="avoid-highways" type="checkbox" />\n                <label for="avoid-tolls">Avoid Tolls</label><input id="avoid-tolls" type="checkbox" />\n                <button id="submit-button">Submit</button>\n            </div>\n        </div>\n    ',function(){const e=document.getElementById("origin"),n=document.getElementById("destination"),i=document.getElementById("unit-system"),o=document.getElementById("submit-button"),d=document.getElementById("avoid-highways"),c=document.getElementById("avoid-tolls"),s=document.getElementById("map"),r=document.getElementById("vehicle-select");(async function(e){let n=g();console.log("ownerId",n);let i=await t(`https://localhost:44376/api/vehicle?ownerId=${n}`);console.log("vehicles",i);l(e,i,{attributes:{"data-id":"id",value:"id"},properties:{text:"yearMakeModel"}})})(r),o.addEventListener("click",(function(){let t={origin:e.value,destination:n.value,travelMode:"DRIVING",unitSystem:i.value,avoidHighways:d.checked,avoidTolls:c.checked},o=g(),l=r.value;new a(o,l,t,s)}))}()};class a{constructor(e,t,n,i){this.map=i,this.vehicleId=t,this.ownerId=e,this.request=n,this.map.directionsService.route(n).then((e=>{console.log(e),this.map.directionsRenderer.setDirections(e)}))}}const c=document.getElementById("app"),s=function(t){e(n+t,m)},r=function(){return 1},u=document.getElementById("app");function m(t){var i;console.log(t),u.innerHTML=`       \n        <h2>${t.fullName}</h2>    \n        \n        <p id="myVehicles">My Vehicles</p>\n        <p id="myTrips">My trips</p>\n        \n        <button id="updateProfileBtn">Update Profile</button>\n    `,function(){const e=document.getElementById("myVehicles"),t=document.getElementById("myTrips");e.addEventListener("click",(function(){console.log("addEventListenerForVirtualLists() called")})),t.addEventListener("click",(function(){}))}(),i=t.id,document.getElementById("updateProfileBtn").addEventListener("click",(function(){console.log("update clicked"),e(n+i,f)}))}function p(t,l){let d=document.getElementById("firstName").value,a=document.getElementById("lastName").value;if(!i(d)&&!i(a)){d=o(d.trim()),a=o(a.trim());let i={FirstName:d,LastName:a,FullName:d+" "+a};"PUT"==l&&(i.Id=t),console.log(i),e(n+t,m,l,i)}}function f(e){u.innerHTML=`\n        <h2>Edit Your Profile</h2>\n\n        <label for="firstName">First Name</label>\n        <input type="text" id="firstName" value="${e.firstName}" placeholder="${e.firstName}">\n        <label for="lastName">Last Name</label>\n        <input type="text" id="lastName" value="${e.lastName}" placeholder="${e.lastName}">\n\n        <button type="submit" id="saveUpdateProfileBtn">Save</button>   \n    `,function(e){document.getElementById("saveUpdateProfileBtn").addEventListener("click",(function(){p(e.id,"PUT")}))}(e)}const h=function(){y.innerHTML='\n    <nav>\n        <ul>\n            <li>\n                <button id="new-trip-button">New Trip</button>\n            </li>\n            <li>\n                <button id="my-profile-button">My Profile</button>\n            </li>\n            <li>\n                <select id="owner-select">\n                    <option selected disabled>---SELECT OWNER---</option>\n                </select>\n            </li>\n        </ul>\n    </nav>\n';const e=document.getElementById("new-trip-button"),i=document.getElementById("my-profile-button");e.addEventListener("click",(function(){d()})),i.addEventListener("click",(function(){let e=r();s(e)})),async function(e){let i=await t(n);l(e,i,{attributes:{"data-id":"id",value:"id"},properties:{text:"fullName"}})}(document.getElementById("owner-select"))},y=(document.getElementById("app"),document.getElementById("header"));function g(){return document.getElementById("owner-select").value}h()})();